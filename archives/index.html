<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives | vobject</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta content="website" property="og:type">
<meta property="og:title">
<meta content="http://vobject.github.io/archives/" property="og:url">
<meta property="og:image">
<meta content="vobject" property="og:site_name">
<meta property="og:description">
<meta content="summary" name="twitter:card">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">vobject</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Things on stuff.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://vobject.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-nightly-builds-with-sourceforge-and-drone-part-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/05/29/nightly-builds-with-sourceforge-and-drone-part-1/" class="article-date">
  <time datetime="2014-05-29T17:25:23.000Z" itemprop="datePublished">May 29 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/05/29/nightly-builds-with-sourceforge-and-drone-part-1/">Nightly Builds with Sourceforge and Drone (Part 1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This post lays the groundwork for some future tutorials on the topics of continuous integration, cross compilation and binary deployment. I will discuss each topic in greater detail but first give a high level overview about the scenario, the goal and how it is pursued. Some parameters of the scenario are very specific (e.g. using Sourceforge, Drone, and Mercurial), others may be adaptable to completely different problems.</p>
<p>In case the title seems too vague, here is a look at the original (more precise) title:<br><strong><em>Providing Nightly Builds of Windows Binaries though Cross Compilation on Ubuntu for Open Source Projects hosted on SourceForge using the Drone Coninuous Integration Service through a Proxy Project on BitBucket.</em></strong></p>
<h1 id="Scenario">Scenario</h1>
<ol>
<li>Our existing project <strong>ci-test</strong> is hosted on <a href="https://sourceforge.net/" target="_blank">Sourceforge</a>.</li>
<li><strong>ci-test</strong> uses <a href="https://sourceforge.net/p/forge/documentation/Mercurial/" target="_blank">Mercurial</a> for revision control and gets new commits pushed every few days.</li>
<li><strong>ci-test</strong> depends only on cross platform libraries.</li>
<li><strong>ci-test</strong> is open source.</li>
</ol>
<h5 id="A_word_about_SourceForge">A word about SourceForge</h5>
<p>Before we start: in my opinion SF is pretty much obsolete for new open source projects. DVCSs have taken over the OSS world in recent years and are not going away anytime soon. SF was too late to offer them as alternatives to their tool of choice Subversion. Even now, SF’s integration of Git and Mercurial is laughable. SF does not support most cool features hosting providers such as <a href="https://github.com/" target="_blank">GitHub</a> and <a href="https://bitbucket.org/" target="_blank">BitBucket</a> introduced in the last years. On top of that, it is usually not supported by services (most notably continuous integration) building on top of modern hosters.</p>
<p>Having said that, SF still has a few important points in its favor: it offers users shell access to their account and their repositories. And it tolerates uploading large binary files for distribution, a use case that <a href="https://github.com/blog/1302-goodbye-uploads" target="_blank">other</a> <a href="https://help.github.com/articles/what-is-my-disk-quota" target="_blank">services</a> <a href="https://help.github.com/articles/distributing-large-binaries" target="_blank">still</a> <a href="http://stackoverflow.com/questions/10346370/what-is-the-best-practice-of-distributing-binaries-from-a-github-project" target="_blank">struggle</a> <a href="https://github.com/blog/1547-release-your-software" target="_blank">with</a>. This tutorial will make use of both of these features.</p>
<p>So, why SF? For the ease of argument, let us assume we are dealing with an existing project (you would not host a new project on SF, would ya?), and that migrating is not an option. In case the project is hosted on GitHub or BitBucket, some of the hurdles go away (e.g. proxy project). However, we would still use SF for deployment of binary artifacts.</p>
<h1 id="Goal">Goal</h1>
<ol>
<li>A build artifact should be created for new commits pushed to the SF repository.</li>
<li>The artifact should contain the project’s binary for Windows.</li>
<li>The artifact should appear in the <em>Files</em> section on the SF project page.</li>
<li>We only want artifacts for the <em>default</em> branch (or <em>master</em> branch in git).</li>
<li>We do not want to spend money.</li>
</ol>
<p>So the goal is to provide <a href="http://en.wikipedia.org/wiki/Nightly_builds" target="_blank">nightly builds</a> for our project and make them publicly available. The thing about providing Windows binaries is to incorporate the cross compilation step into our journey. Since the continuous integration service builds on Linux, this is another challenge. Also, I have not yet come accross a free build service running Windows. Providing binaries for Linux would be much easier (and a bit pointless).</p>
<h1 id="Workflow">Workflow</h1>
<p>The development/distribution workflow we want looks like this:</p>
<ol>
<li><em>Developer A</em> pushes new commits to the default branch.</li>
<li><em>Developer A</em> gets an email containing a link.<br>2.1 If <em>A</em> clicks the link, a nightly build is triggered and an new artifact appears a few minutes later.<br>2.2 If <em>A</em> ignores the email, nothing happens.</li>
</ol>
<p>This approach is mostly automated but still gives the developer the choice not to provide a build artifact for his latest updates. I think this is a reasonable workflow for open source projects, whose default/master branch is not always as stable as it should be.</p>
<p>The following figure outlines the workflow and provides some more technical information about the actors and their relationships.</p>
<img src="/images/nightly-builds-with-sourceforge-and-drone/workflow.svg" title="Workflow showing actors and relationships">


<ol>
<li>The developer pushes to the repo.</li>
<li>The developer receives an email with a link.</li>
<li>The developer clicks the link and starts a build.</li>
<li>The bash build script (running on Ubuntu 12.04) clones the repository from SF and sets up everything else it needs for building. It compiles the code and creates the artifacts (e.g. compress binary and config files into a single archive).</li>
<li>The script then uploads the artifacts into the designated SF project section. Settings up the authentification is a key task for making the process work and will be covered later.</li>
</ol>
<h1 id="Setting_things_up">Setting things up</h1>
<p>This section lists the major tasks to set up the workflow described. It serves as a high level tl;dr and should be enough for someone familiar with the technology and services involved. Everyone else will have to wait for the second part of this tutorial.</p>
<ul>
<li>Create and account for <a href="https://bitbucket.org/" target="_blank">BitBucket</a> and <a href="https://drone.io/" target="_blank">Drone</a> if you do not have one yet.</li>
<li>Create a proxy project on BitBucket, e.g. <strong>ci-test-nightly</strong>. SF itself is not supported by Drone, so the purpose of this proxy project is just to be able to create a new build project on Drone.</li>
<li>Login to Drone and create a ‘New Project’ based on <strong>ci-nightly</strong> from BitBucket.</li>
<li>Enter ‘default’ into the <em>Settings -&gt; Repository -&gt; Branch Filter</em></li>
<li>Register the projects SSH key from <em>Settings -&gt; Repository -&gt; View Key</em> at your SF account.</li>
<li>Create a folder ‘NightlyBuilds’ inside the project’s files section via the SF shell.</li>
<li>Copy the <em>Settings -&gt; Repository -&gt; Build Hook</em> link and create a Mercurial hook via the SF shell to send out an email containing this link to developers.</li>
<li>Write the clone &amp; build &amp; upload script into the <em>Settings -&gt; Commands</em> text box.</li>
</ul>
<h1 id="Notes_&amp;_Risks">Notes &amp; Risks</h1>
<ul>
<li>SourceForge took quite some time (hours) until the newly registered SSH key was accepted.</li>
<li>Drone is still in Beta and may change considerably in the future. This may lead to alterations to the service that renders these instructions useless.</li>
<li>Although I only talked about BitBucket and Drone, it should be possible to replace each of them with GitHub or Travic-CI. I have not done it, but do not see technical problems standing in the way.</li>
</ul>
<h1 id="Future">Future</h1>
<p>The next part(s) will go into cross compilation on the Drone applience and how to configure SF through shell access.</p>
<h1 id="Reference">Reference</h1>
<p><a href="http://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software" target="_blank">Comparison of continuous integration software</a><br><a href="http://blog.testnoir.com/ciaas-roundup-11-hosted-continuous-integration-services/" target="_blank">CIaaS roundup: 11 hosted continuous integration services</a><br><a href="http://sourceforge.net/apps/trac/sourceforge/wiki/Release%20files%20for%20download" target="_blank">SourceForge: Release Files for Download (FRS)</a><br><a href="https://sourceforge.net/apps/trac/sourceforge/wiki/Disk%20quotas" target="_blank">SourceForge: Service quotas</a><br><a href="https://sourceforge.net/apps/trac/sourceforge/ticket/5480" target="_blank">SourceForge: Trust issues with Mercurial project-based hgrc</a><br><a href="http://docs.drone.io/" target="_blank">Drone Documentation</a><br><a href="http://vimeo.com/96136521" target="_blank">Drone CI - Philly DevOps May 2014</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a href="http://vobject.github.io/blog/2014/05/29/nightly-builds-with-sourceforge-and-drone-part-1/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Continuous Integration/">Continuous Integration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Drone/">Drone</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nightly Builds/">Nightly Builds</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sourceforge/">Sourceforge</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-fun-with-cpp-callbacks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/04/19/fun-with-cpp-callbacks/" class="article-date">
  <time datetime="2014-04-18T23:19:01.000Z" itemprop="datePublished">Apr 19 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/04/19/fun-with-cpp-callbacks/">Fun With C++ Callbacks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I did some experiments with callbacks based on <a href="http://ideone.com/2hC72x" target="_blank">a snippet</a> from <a href="http://ideone.com" target="_blank">ideone.com</a>.</p>
<figure class="highlight cpp"><figcaption><span>EventManager</span><a href="http://coliru.stacked-crooked.com/a/bf8d9382748da44a" target="_blank">Build&Run</a></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
</pre></td><td class="code"><pre><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;vector&gt;</span>
<span class="preprocessor">#include &lt;string&gt;</span>
<span class="preprocessor">#include &lt;memory&gt;</span>
<span class="preprocessor">#include &lt;algorithm&gt;</span>
<span class="preprocessor">#include &lt;functional&gt;</span>

<span class="keyword">class</span> EventManager
{
<span class="keyword">public</span>:
    <span class="keyword">template</span>&lt;<span class="keyword">class</span> F&gt;
    <span class="keyword">void</span> AddClient(F client)
    {
        clients.emplace_back(<span class="keyword">new</span> EventClient&lt;F&gt;(<span class="built_in">std</span>::move(client)));
    }
    
    <span class="keyword">void</span> Emit()
    {
        <span class="built_in">std</span>::for_each(clients.begin(), clients.end(), [](<span class="keyword">auto</span>&amp; client){ client-&gt;Respond(); });
    }
    
<span class="keyword">private</span>:
    <span class="keyword">struct</span> IEventClient
    {
        <span class="keyword">virtual</span> ~IEventClient() { }
        <span class="keyword">virtual</span> <span class="keyword">void</span> Respond() = <span class="number">0</span>;
    };
    
    <span class="keyword">template</span>&lt;<span class="keyword">class</span> F&gt;
    <span class="keyword">struct</span> EventClient : IEventClient
    {
        F f;
        EventClient(F&amp;&amp; f) : f(<span class="built_in">std</span>::move(f)) { }
        <span class="keyword">void</span> Respond() override { f(); }
    };
    
    <span class="built_in">std</span>::<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">std</span>::unique_ptr&lt;IEventClient&gt;</span>&gt; clients;
};

<span class="keyword">struct</span> Foo { <span class="keyword">void</span> <span class="keyword">operator</span>()() <span class="keyword">const</span> { <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Foo\n"</span>; } };

<span class="keyword">struct</span> Bar { <span class="keyword">int</span> <span class="keyword">operator</span>()() { <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Bar\n"</span>; <span class="keyword">return</span> <span class="number">0</span>; } };

<span class="keyword">struct</span> Baz
{
    Baz() { id = ID++; obj_valid = <span class="keyword">true</span>; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ctor(id="</span> &lt;&lt; id &lt;&lt; <span class="string">")\n"</span>; };
    ~Baz() { <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"dtor(id="</span> &lt;&lt; id &lt;&lt; <span class="string">")\n"</span>; obj_valid = <span class="keyword">false</span>; };
    
    <span class="comment">//Baz(const Baz&amp; b) { id = b.id; obj_valid = b.obj_valid; std::cout &lt;&lt; "cctor(id=" &lt;&lt; id &lt;&lt; ")\n"; };</span>
    Baz(Baz&amp;&amp; b) { id = <span class="built_in">std</span>::move(b.id); obj_valid = <span class="built_in">std</span>::move(b.obj_valid); b.id = -<span class="number">1</span>; b.obj_valid = <span class="keyword">false</span>; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"mctor(id="</span> &lt;&lt; id &lt;&lt; <span class="string">")\n"</span>; };
    
    Baz(<span class="keyword">const</span> Baz&amp; b) = <span class="keyword">delete</span>;
    Baz&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Baz&amp;) = <span class="keyword">delete</span>;
    
    <span class="keyword">void</span> f(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s) <span class="keyword">const</span> { <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Baz::f(\""</span> &lt;&lt; s &lt;&lt; <span class="string">"\", id="</span> &lt;&lt; id &lt;&lt; <span class="string">", obj_valid="</span> &lt;&lt; obj_valid &lt;&lt; <span class="string">")\n"</span>; }    
    
    <span class="keyword">static</span> <span class="keyword">int</span> ID;
    <span class="keyword">int</span> id{-<span class="number">1</span>};
    <span class="keyword">bool</span> obj_valid{<span class="keyword">false</span>};
};

<span class="keyword">int</span> Baz::ID;


<span class="keyword">int</span> main()
{
    EventManager eventMan;

    eventMan.AddClient([]{ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"lambda\n"</span>; });
    eventMan.AddClient(<span class="built_in">std</span>::bind([](<span class="keyword">int</span> i){ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"lambda+bind\n"</span>; }, <span class="number">1234</span>));
    
    <span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt; f1 = []{ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"std::function\n"</span>; };
    eventMan.AddClient(f1);
    
    <span class="built_in">std</span>::function&lt;<span class="keyword">double</span>(<span class="keyword">double</span>)&gt; f2 = [](<span class="keyword">double</span> d){ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"std::function+bind\n"</span>; <span class="keyword">return</span> d;};
    eventMan.AddClient(<span class="built_in">std</span>::bind(f2, <span class="number">.5</span>));
    
    eventMan.AddClient(Foo());
    eventMan.AddClient(Bar());

    eventMan.AddClient(<span class="built_in">std</span>::bind(&amp;Baz::f, Baz(), <span class="string">"baz_t"</span>)); <span class="comment">// ctor and move</span>
    eventMan.AddClient(<span class="built_in">std</span>::bind(&amp;Baz::f, <span class="built_in">std</span>::make_shared&lt;Baz&gt;(), <span class="string">"baz_p"</span>)); <span class="comment">// same with shared_ptr</span>

    {
        <span class="comment">//Baz baz; // ctor</span>
        <span class="comment">//eventMan.AddClient(std::bind(&amp;Baz::f, baz, "baz_o")); // copy ctor and move</span>
    }
    
    {
        Baz baz;
        eventMan.AddClient(<span class="built_in">std</span>::bind(&amp;Baz::f, <span class="built_in">std</span>::move(baz), <span class="string">"baz_m"</span>)); <span class="comment">// invokes copy ctor</span>
    }
    
    {
        Baz baz;
        eventMan.AddClient(<span class="built_in">std</span>::bind(&amp;Baz::f, <span class="built_in">std</span>::ref(baz), <span class="string">"baz_r"</span>)); <span class="comment">// no copy, goes out of scope, UB</span>
    }
    
    eventMan.Emit();
}
</pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a href="http://vobject.github.io/blog/2014/04/19/fun-with-cpp-callbacks/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C++/">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C++14/">C++14</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexo-recipes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/04/19/hexo-recipes/" class="article-date">
  <time datetime="2014-04-18T22:58:14.000Z" itemprop="datePublished">Apr 19 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/04/19/hexo-recipes/">Simple Hexo Recipes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Create_new_post">Create new post</h3>
<figure class="highlight [bash]"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$&gt; hexo <span class="built_in">new</span> <span class="built_in">post</span> &lt;title&gt;
</pre></td></tr></table></figure>

<h3 id="Test_content_locally">Test content locally</h3>
<p>Generate content into the <code>public</code> directory and start a local server.</p>
<figure class="highlight [bash]"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="variable">$&gt;</span> hexo generate && hexo server
</pre></td></tr></table></figure>

<p>The server detects most modifications made to posts/themes and regenerates on the fly -&gt; no restart necessary, just reload the page.</p>
<h3 id="Deploying">Deploying</h3>
<p>There is no local <code>master</code> branch. All work is done inside the local <code>source</code> branch.<br>Test changes locally, commit and push them to upstream. Then deploy the generated content:</p>
<figure class="highlight [bash]"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="variable">$&gt;</span> hexo generate && hexo deploy
</pre></td></tr></table></figure>

<p>This will push the generated content to the upstream <code>master</code> branch. The deployment process will push to the repository specified inside <code>_config.yml</code>. The repository URL may be SSH.</p>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-build-opentomb-on-linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/02/16/build-opentomb-on-linux/" class="article-date">
  <time datetime="2014-02-16T04:18:22.000Z" itemprop="datePublished">Feb 16 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2014/02/16/build-opentomb-on-linux/">Build OpenTomb on Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A while ago the <a href="https://sourceforge.net/p/opentomb" target="_blank">OpenTomb</a> <a href="http://www.tombraiderforums.com/showthread.php?t=197508" target="_blank">developers</a> accepted my contribution that allowed the engine to be compiled under Linux.<br>This was not too hard, since the engine only depends on cross-platform libraries and uses GCC to <a href="http://www.moddb.com/games/opentomb/tutorials/how-to-compile-opentomb-in-windows-using-codeblocks-ide" target="_blank">compile on Windows</a>. It mainly consisted of a CMake script and a few code fixes.<br>The <a href="https://sourceforge.net/p/opentomb/code/ci/default/tree/CMakeLists.txt" target="_blank">CMake script</a> already contains a very brief explanation on how to compile on the command-line.  </p>
<p>This post provides a more detailed step-by-step guide to get everything up and running for development on Linux.</p>
<p><em>Tested with:</em></p>
<ul>
<li>Arch Linux</li>
<li>Latest <a href="https://sourceforge.net/p/opentomb/code" target="_blank">OpenTomb commit</a> as of 20140216</li>
<li>Latest config files from <a href="http://sourceforge.net/projects/opentomb/files/engine.7z/download" target="_blank">OpenTomb binary archive</a></li>
</ul>
<p><em>Requirements:</em></p>
<ul>
<li>SDL2 installed <em>(tested with 2.0.1)</em></li>
<li>zlib installed <em>(tested with 1.2.8)</em></li>
<li>Mercurial installed <em>(tested with 2.9)</em></li>
<li>CMake 2.8 installed <em>(tested with 2.8.12)</em></li>
<li>QtCreator installed <em>(tested with 3.0.1)</em></li>
<li>Game assets of TombRaider 1-5 <em>(tested with <a href="http://www.gog.com/game/tomb_raider_123" target="_blank">GOG</a> <a href="http://www.gog.com/game/tomb_raider_the_last_revelation_chronicles" target="_blank">version</a>)</em></li>
</ul>
<h3 id="Get_the_source_code">Get the source code</h3>
<p>Choose a directory and clone the OpenTomb source code repository:<br><code>hg clone http://hg.code.sf.net/p/opentomb/code opentomb-code</code></p>
<h3 id="Compile_using_QtCreator">Compile using QtCreator</h3>
<ol>
<li>Start up QtCreator and select <code>File -&gt; Open File or Project</code>.</li>
<li>Navigate to your cloned repository directory and open <code>CMakeLists.txt</code>.</li>
</ol>
<img src="/images/build_opentomb/build_opentomb_01.jpeg" title="Opening CMakeLists.txt">

<ol>
<li>Choose a build directory. Make sure it is located outside of the repository. The default build directory suggested by QtCreator (e.g. <code>opentomb-code-build</code>) is usually just fine.</li>
</ol>
<img src="/images/build_opentomb/build_opentomb_02.jpeg" title="Choosing a build directory">

<ol>
<li>Provide CMake with the arguments <code>-DCMAKE_BUILD_TYPE=Debug</code> (if you plan to develop) or <code>-DCMAKE_BUILD_TYPE=Release</code> (if you just want to run the engine).</li>
<li>Select <code>Unix Generator</code> as the generator and click <code>Run CMake</code>. This should successfully create a Makefile if the required libraries are installed. Click <code>Finish</code>.</li>
</ol>
<img src="/images/build_opentomb/build_opentomb_03.jpeg" title="Configuring CMake">

<ol>
<li>Hit <code>Ctrl+B</code> to start compilation. This can take a while to complete and creates the OpenTomb executable inside the build directory.</li>
</ol>
<img src="/images/build_opentomb/build_opentomb_04.jpeg" title="QtCreator compiles">


<h4 id="Pro_tip:_faster_compilation">Pro tip: faster compilation</h4>
<p>Add <code>-j2</code> or <code>-j4</code> (depending on how many CPU cores you have) into <code>Projects -&gt; Build &amp; Run -&gt; Build Steps -&gt; Details -&gt; Additional arguments</code>.</p>
<img src="/images/build_opentomb/build_opentomb_08.jpeg" title="Configure parallel compilation jobs">


<h3 id="Add_config_files">Add config files</h3>
<p>Extract the files form the OpenTomb binary archive (engine.7z) into the build directory. The important files/directories are: data, save, scripts, VeraMono.ttf, ascII.txt, config.lua.</p>
<img src="/images/build_opentomb/build_opentomb_05.jpeg" title="OpenTomb config files">


<h3 id="Add_game_assets">Add game assets</h3>
<p>Copy game files from the original Tomb Raider games into the corresponding <code>data</code> subdirectory like you would on Windows. E.g. copy all “*.TR2” levels from the Tomb Raider 2 data directory into <code>opentomb-code-build/data/tr2/data</code>.<br>To get audio, copy <code>MAIN.SFX</code>, too.</p>
<h3 id="Final_touch">Final touch</h3>
<p>Modify <code>cvars.game_level</code> in config.lua to match an existing level file, e.g. <code>data/tr2/data/WALL.TR2</code>. Keep in mind, that file paths in Linux are case sensitive.</p>
<img src="/images/build_opentomb/build_opentomb_06.jpeg" title="Configure startup game level">


<p>Now you should be able to launch the game using the file browser or from within QtCreator via <code>Ctrl+R</code>.</p>
<img src="/images/build_opentomb/build_opentomb_07.jpeg" title="Running OpenTomb">


      
    </div>
    <footer class="article-footer">
      
        <a href="http://vobject.github.io/blog/2014/02/16/build-opentomb-on-linux/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenTomb/">OpenTomb</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-build-stellarium-on-windows" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2013/03/10/build-stellarium-on-windows/" class="article-date">
  <time datetime="2013-03-10T11:54:47.000Z" itemprop="datePublished">Mar 10 2013</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2013/03/10/build-stellarium-on-windows/">Build Stellarium on Windows</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="How_to_build_Stellarium_on_Windows">How to build Stellarium on Windows</h3>
<p><em>Tested with:</em></p>
<ul>
<li>Windows 7 32Bit</li>
<li>Windows 8 32Bit</li>
<li>the source tarball for Stellarium 0.12.0</li>
<li>the current Stellarium in-development branch 0.12.1</li>
</ul>
<p><em>Requirements:</em></p>
<ul>
<li>cygwin with bazaar package installed</li>
<li>no random crap inside the PATH variable that interferes with CMake, MinGW, Qt</li>
</ul>
<h4 id="MinGW_(20120426):"><a href="http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/mingw-get-inst-20120426.exe/download" target="_blank">MinGW (20120426)</a>:</h4>
<p>Run the installer and select:</p>
<ul>
<li><em>Pre-packaged repository catalogues</em> (this will install gcc 4.6, while selecting <em>Latest catalogue</em> will install gcc 4.7 and the stellarium executable will crash at start)</li>
<li><em>C</em></li>
<li><em>C++</em></li>
<li><em>MSYS Basic System</em></li>
</ul>
<p>Start MSYS Shell (<em>MINGW_INSTALL\msys\1.0\msys.bat</em>) and run:<br><code>mingw-get install libz libiconv gettext</code></p>
<p>Do not mind errors about already installed packages.</p>
<h4 id="QT_4-8-4:"><a href="http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.4-mingw.exe" target="_blank">QT 4.8.4</a>:</h4>
<p>Install Qt into a path without spaces.<br>When asked by the installer point it to the previously installed MinGW directory.</p>
<h4 id="CMake_2-8-10:"><a href="http://www.cmake.org/files/v2.8/cmake-2.8.10.2-win32-x86.exe" target="_blank">CMake 2.8.10</a>:</h4>
<p>Install CMake. Do not add it to the PATH variable when asked for at the end of the installation.</p>
<h4 id="Stellarium_source_code:"><a href="https://code.launchpad.net/~stellarium/" target="_blank">Stellarium source code</a>:</h4>
<p>Create a folder <code>stellarium</code>. This is where we will put the source code, the build directory and QtCreator.</p>
<p>Start cygwin and go into the created folder. Fetch the latest source:<br><code>bzr branch lp:stellarium stellarium-lp</code></p>
<p>If the above command results in some sort of certificate error try this:<br><code>bzr branch -Ossl.ca_certs=/usr/ssl/certs/ca-bundle.crt lp:stellarium stellarium-lp</code></p>
<h4 id="QtCreator_2-6-2:"><a href="http://releases.qt-project.org/qtcreator/2.6.2/sources/qt-creator-windows-opensource-2.6.2.7z" target="_blank">QtCreator 2.6.2</a>:</h4>
<p>Extract the archive into its own folder inside the <code>stellarium</code> directory next to <code>stellarium-lp</code>.<br>Inside <code>stellarium</code> folder create a new file <code>qtcreator.bat</code> with following content:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>@echo off

<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\MinGW_x86\bin
<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\MinGW_x86\include
<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\MinGW_x86\lib

<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\Qt\4.8.4
<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\Qt\4.8.4\bin
<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\Qt\4.8.4\include
<span class="operator"><span class="keyword">set</span> PATH=%PATH%;</span>C:\Qt\4.8.4\lib

<span class="operator"><span class="keyword">start</span> qt-creator\bin\qtcreator.exe</span>
</pre></td></tr></table></figure>

<p>Change the paths accordingly.</p>
<h4 id="Build:">Build:</h4>
<p>Start <code>qtcreator.bat</code>.<br>Check if a MinGW Build Kit does exist: <em>Tool -&gt; Options -&gt; Bild &amp; Run -&gt; Kits</em>. Create a new one if it does not.</p>
<p>Open the Stellarium project using <em>File -&gt; Open File or Project</em> and select <code>stellarium-lp\CMakeLists.txt</code>.<br>Go with the default build directory when asked for it (should end with <code>stellarium-lp-build</code>).<br>Specify the <code>cmake</code> executable if asked for it.<br>Select the <code>MinGW Generator</code> and <code>Run CMake</code>.</p>
<p>Compile.</p>
<h4 id="Run:">Run:</h4>
<p>To run from inside QtCreator change the working directory of the <em>Run</em> settings from <code>stellarium-lp-build\src</code> to the source folder <code>stellarium-lp</code>.</p>
<p>Run.</p>
<h4 id="Debug:">Debug:</h4>
<p>The default CMake configuration of the stellarium source from launchpad is already set to <code>Debug</code>.</p>

      
    </div>
    <footer class="article-footer">
      
        <a href="http://vobject.github.io/blog/2013/03/10/build-stellarium-on-windows/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stellarium/">Stellarium</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows/">Windows</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2013/03/06/hello-world/" class="article-date">
  <time datetime="2013-03-06T18:36:13.000Z" itemprop="datePublished">Mar 6 2013</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2013/03/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Initial test post.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="function">alert(<span class="string">'Hello World!'</span>)</span>;
</pre></td></tr></table></figure>



<figure class="highlight objc"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">[rectangle setX: 10 y: 10 width: 20 height: 20]</span><span class="comment">;</span>
</pre></td></tr></table></figure>



<figure class="highlight"><figcaption><span>Array.map</span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">array</span>.<span class="keyword">map</span>(callback[, thisArg])
</pre></td></tr></table></figure>



<figure class="highlight"><figcaption><span>.compact</span><a href="http://underscorejs.org/#compact" target="_blank">Underscore.js</a></figcaption><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>.compact([<span class="number">0</span>, <span class="number">1</span>, <span class="keyword">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>]);
=&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]
</pre></td></tr></table></figure>



<figure class="highlight python"><figcaption><span>[title] [] [url] [link text]</span></figcaption><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]:
    print(i)
</pre></td></tr></table></figure>



<figure class="highlight [cpp]"><figcaption><span>[title] [url] [link text]</span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="attribute">int i </span>=<span class="string"> 0;</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C++/">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C++14/">C++14</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Continuous Integration/">Continuous Integration</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drone/">Drone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nightly Builds/">Nightly Builds</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenTomb/">OpenTomb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sourceforge/">Sourceforge</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stellarium/">Stellarium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">May 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04">April 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02">February 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03">March 2013</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2014/05/29/nightly-builds-with-sourceforge-and-drone-part-1/">Nightly Builds with Sourceforge and Drone (Part 1)</a>
          </li>
        
          <li>
            <a href="/blog/2014/04/19/fun-with-cpp-callbacks/">Fun With C++ Callbacks</a>
          </li>
        
          <li>
            <a href="/blog/2014/04/19/hexo-recipes/">Simple Hexo Recipes</a>
          </li>
        
          <li>
            <a href="/blog/2014/02/16/build-opentomb-on-linux/">Build OpenTomb on Linux</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/10/build-stellarium-on-windows/">Build Stellarium on Windows</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 vobject<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'vobject';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script type="text/javascript" src="/js/script.js"></script>
  </div>
</body>
</html>